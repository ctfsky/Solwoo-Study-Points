<!DOCTYPE html>
<html lang="ja">
<head>
    <style>
        /* åœ¨åŸæœ‰æ ·å¼æœ«å°¾æ·»åŠ åŒæ­¥é¢æ¿çš„æ ·å¼ */
        .sync-panel {
            border-color: #ffcc80;
            background-color: #fffaf0;
            text-align: center;
        }
        .sync-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 10px;
        }
        .btn-sync {
            background: #ffa726;
            font-size: 0.85rem;
            padding: 8px 15px;
        }
    </style>
</head>

<body>
    <div class="container">
        <main>
            <section class="panel sync-panel">
                <h2>â˜ï¸ ãƒ‡ãƒ¼ã‚¿åŒæœŸ (ãƒ‡ãƒ¼ã‚¿å¼•è¶Šã—)</h2>
                <p style="font-size: 0.8rem; color: #888;">åˆ¥ã®ãƒ‡ãƒã‚¤ã‚¹ã«ãƒ‡ãƒ¼ã‚¿ã‚’ç§»ã—ãŸã„æ™‚ã«ä½¿ã£ã¦ã­</p>
                <div class="sync-buttons">
                    <button class="btn-sync" onclick="exportData()">ãƒ‡ãƒ¼ã‚¿ã‚’ã‚³ãƒ”ãƒ¼ (é…å¸ƒç”¨)</button>
                    <button class="btn-sync" style="background: #fb8c00;" onclick="importData()">ãƒ‡ãƒ¼ã‚¿ã‚’å–ã‚Šè¾¼ã‚€ (ä¿å­˜ç”¨)</button>
                </div>
            </section>
        </main>

        <div style="text-align: center; margin-bottom: 20px;">
            <button id="reset-btn" class="reset-btn">âš ï¸ æœ€åˆã‹ã‚‰ã‚„ã‚Šç›´ã™</button>
        </div>

        <footer>
            <p>æ¯æ—¥ã‚³ãƒ„ã‚³ãƒ„ãŒã‚“ã°ã‚ã†ï¼ğŸŒˆ</p>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // ... (ä¿ç•™ä½ åŸæœ‰çš„æ•°æ®åˆå§‹åŒ–å’Œæ¸²æŸ“é€»è¾‘) ...

            // --- æ–°å¢ï¼šåŒæ­¥åŠŸèƒ½å‡½æ•° ---

            // å¯¼å‡ºæ•°æ®ï¼šå°†æœ¬åœ°å­˜å‚¨çš„æ‰€æœ‰å†…å®¹è½¬ä¸ºå­—ç¬¦ä¸²å¹¶å¤åˆ¶åˆ°å‰ªè´´æ¿
            window.exportData = function() {
                const dataStr = localStorage.getItem('studentPointsData');
                if (!dataStr) {
                    alert("ã¾ã ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚");
                    return;
                }
                
                // å…¼å®¹æ€§å¤åˆ¶æ–¹æ³•
                const textArea = document.createElement("textarea");
                textArea.value = dataStr;
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    alert("ãƒ‡ãƒ¼ã‚¿ã‚’ã‚³ãƒ”ãƒ¼ã—ãŸã‚ˆï¼\nã“ã‚Œã‚’LINEã‚„ãƒ¡ãƒ¼ãƒ«ã§ã‚¹ãƒãƒ›ã«é€ã£ã¦ã€ã‚¹ãƒãƒ›å´ã§ã€Œå–ã‚Šè¾¼ã‚€ã€ã‚’æŠ¼ã—ã¦ã­ã€‚");
                } catch (err) {
                    alert("ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ç›´æ¥ã“ã®æ–‡å­—ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ï¼š" + dataStr);
                }
                document.body.removeChild(textArea);
            };

            // å¯¼å…¥æ•°æ®ï¼šæ¥æ”¶å‰ªè´´æ¿çš„å­—ç¬¦ä¸²å¹¶å­˜å…¥æœ¬åœ°å­˜å‚¨
            window.importData = function() {
                const input = prompt("ã‚³ãƒ”ãƒ¼ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ã“ã“ã«è²¼ã‚Šä»˜ã‘ã¦ã­ï¼š");
                if (input) {
                    try {
                        // ç®€å•æ ¡éªŒæ˜¯å¦ä¸ºåˆæ³•çš„ JSON
                        const parsed = JSON.parse(input);
                        if (parsed.points !== undefined) {
                            localStorage.setItem('studentPointsData', input);
                            alert("ãƒ‡ãƒ¼ã‚¿ã‚’å–ã‚Šè¾¼ã‚“ã ã‚ˆï¼ç”»é¢ã‚’æ›´æ–°ã™ã‚‹ã­ã€‚");
                            location.reload(); // åˆ·æ–°é¡µé¢å±•ç¤ºæ–°æ•°æ®
                        } else {
                            throw new Error("Invalid format");
                        }
                    } catch (e) {
                        alert("ãƒ‡ãƒ¼ã‚¿ãŒæ­£ã—ããªã„ã¿ãŸã„ã€‚ã‚‚ã†ä¸€åº¦ç¢ºèªã—ã¦ã­ã€‚");
                    }
                }
            };

            // ... (ä¿ç•™ä½ åŸæœ‰çš„å…¶ä»–æ‰€æœ‰ JavaScript å‡½æ•°) ...
        });
    </script>
</body>
</html>
